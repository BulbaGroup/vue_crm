(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0efaae1e"],{6288:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("LoaderComponent"):t.loading?t._e():i("v-card",{attrs:{color:"backgroundMain",outlined:""}},[i("v-card-title",[t._v(" История "),i("v-spacer"),i("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Найти","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),i("HistoryPeriodsComponent"),i("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search,"sort-by":["date"],"sort-desc":[!0],"multi-sort":""},scopedSlots:t._u([{key:"item",fn:function(e){return[i("tr",{class:t.customRowClass(e.item),on:{click:function(i){return t.onEdit(e.item)}}},[t.window.isMobile?t._e():i("td",[t._v(" "+t._s(t._f("dateFilter")(e.item.date,"DD-MM-YY"))+" ")]),t.window.isMobile?t._e():i("td",[t._v(" "+t._s(e.item.categoryTitle)+" ")]),t.window.isMobile?t._e():i("td",[t._v(" "+t._s(t._f("categoryTypeFilter")(e.item.categoryType,e.item.categoryType))+" ")]),i("td",[t._v(" "+t._s(t._f("currencyFilter")(e.item.count,{maximumFractionDigits:2}))+" ")]),i("td",[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var a=n.on,o=n.attrs;return[i("span",t._g(t._b({},"span",o,!1),a),[t._v(t._s(e.item.marker))])]}}],null,!0)},[i("span",[t._v(t._s(e.item.description||e.item.marker))])])],1),i("td",{staticClass:"td-flex"},[i("v-btn",{attrs:{icon:""},on:{click:function(i){return i.stopPropagation(),t.onRemove(e.item)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-delete")])],1)],1)])]}}])}),i("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialogToRemove,callback:function(e){t.dialogToRemove=e},expression:"dialogToRemove"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v(" Удалить запись? ")]),i("v-card-text",[t._v(" Внимание. Удаление записи необратимо. Подтвердите удаление записи. ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogToRemove=!1}}},[t._v(" Отмена ")]),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogToRemove=!1,t.removeRecord()}}},[t._v(" Удалить ")])],1)],1)],1)],1)},a=[],o=(i("96cf"),i("1da1")),r=i("5530"),s=i("2b0e"),c=i("2f62"),l=i("87c7"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"Начало периода","persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.periods.startDate,callback:function(e){t.$set(t.periods,"startDate",e)},expression:"periods.startDate"}},"v-text-field",a,!1),n))]}}]),model:{value:t.datePickerStart,callback:function(e){t.datePickerStart=e},expression:"datePickerStart"}},[i("v-date-picker",{attrs:{locale:"locale","first-day-of-week":"1"},on:{input:function(e){t.datePickerStart=!1}},model:{value:t.periods.startDate,callback:function(e){t.$set(t.periods,"startDate",e)},expression:"periods.startDate"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"Конец периода","persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.periods.endDate,callback:function(e){t.$set(t.periods,"endDate",e)},expression:"periods.endDate"}},"v-text-field",a,!1),n))]}}]),model:{value:t.datePickerFinish,callback:function(e){t.datePickerFinish=e},expression:"datePickerFinish"}},[i("v-date-picker",{attrs:{locale:"locale","first-day-of-week":"1"},on:{input:function(e){t.datePickerFinish=!1}},model:{value:t.periods.endDate,callback:function(e){t.$set(t.periods,"endDate",e)},expression:"periods.endDate"}})],1)],1)],1)],1)},u=[],h=i("c1df"),f=i.n(h),p=s["a"].extend({name:"HistoryPeriodsComponent",data:function(){return{datePickerStart:!1,datePickerFinish:!1,locale:"ru-Ru",periods:{startDate:"",endDate:""}}},created:function(){},mounted:function(){this.setDates()},computed:{},methods:{setDates:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);this.periods.startDate=f()(e).format("YYYY-MM-DD"),this.periods.endDate=f()(i).format("YYYY-MM-DD")}}}),v=p,m=i("2877"),g=i("6544"),b=i.n(g),x=i("62ad"),y=i("a523"),k=i("2e4b"),w=i("e449"),_=i("0fd9"),D=i("8654"),T=Object(m["a"])(v,d,u,!1,null,null,null),R=T.exports;b()(T,{VCol:x["a"],VContainer:y["a"],VDatePicker:k["a"],VMenu:w["a"],VRow:_["a"],VTextField:D["a"]});var C=s["a"].extend({name:"HistoryPage",metaInfo:{title:"История"},components:{LoaderComponent:l["a"],HistoryPeriodsComponent:R},data:function(){return{loading:!0,search:"",currencyOptions:{style:"currency",currency:"BYN",maximumFractionDigits:2},record:null,dialogToRemove:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["historyByRecordsGetter","infoBillGetter","currencyBaseGetter","recordsGetter","windowGetter"])),{},{bill:function(){return this.infoBillGetter},currencyBase:function(){return this.currencyBaseGetter},items:function(){return this.recordsGetter},window:function(){return this.windowGetter},headers:function(){return this.window.isMobile?this.window.isMobile?[{text:"Сумма",value:"count"},{text:"Метка",value:"marker"},{text:"Действие",value:"id",sortable:!1,align:"center"}]:void 0:[{text:"Дата",value:"date",align:"center",sortable:!0},{text:"Категория",value:"category",sortable:!0},{text:"Тип",value:"categoryType"},{text:"Сумма",value:"count"},{text:"Метка",value:"marker"},{text:"Действие",value:"id",sortable:!1,align:"center"}]}}),mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkAvailabilityData();case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["historyByRecordsAction","removeRecordAction"])),{},{onEdit:function(t){this.$router.push({name:"Detail",params:{id:t.id}})},onRemove:function(t){this.record=t,this.dialogToRemove=!0},removeRecord:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.removeRecordAction(t.record);case 2:t.$router.push("/History");case 3:case"end":return e.stop()}}),e)})))()},customRowClass:function(t){var e="outcome"===t.categoryType?"deep-orange lighten-5":"teal lighten-5";return"cursor ".concat(e)},checkAvailabilityData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,!t.$store.getters.uidGetter;case 2:if(!e.sent){e.next=5;break}return e.next=5,t.$store.dispatch("fetchInfoAction");case 5:if(t.historyByRecordsGetter){e.next=8;break}return e.next=8,t.historyByRecordsAction();case 8:case"end":return e.stop()}}),e)})))()}})}),O=C,A=(i("93bb"),i("8336")),j=i("b0af"),V=i("99d9"),B=i("8fea"),M=i("169a9"),F=i("132d"),P=i("2fa4"),S=(i("a9e3"),i("ade3")),Y=(i("9734"),i("4ad4")),$=i("a9ad"),I=i("16b7"),G=i("b848"),L=i("75eb"),E=i("f573"),H=i("f2e7"),W=i("80d2"),z=i("d9bd"),N=i("58df"),J=Object(N["a"])($["a"],I["a"],G["a"],L["a"],E["a"],H["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String,zIndex:{default:null}},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!this.bottom&&!this.left&&!this.top&&!this.right,a=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||n?o=a+e.width/2-i.width/2:(this.left||this.right)&&(o=a+(this.right?e.width:-i.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!1!==this.attach?e.offsetTop:e.top,a=0;return this.top||this.bottom?a=n+(this.bottom?e.height:-i.height)+(this.bottom?10:-10):(this.left||this.right)&&(a=n+e.height/2-i.height/2),this.nudgeTop&&(a-=parseInt(this.nudgeTop)),this.nudgeBottom&&(a+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(a+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(W["g"])(this.maxWidth),minWidth:Object(W["g"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(W["t"])(this,"activator",!0)&&Object(z["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=Y["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===W["x"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(S["a"])(t,this.contentClass,!0),Object(S["a"])(t,"menuable__content__active",this.isActive),Object(S["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}}),X=Object(m["a"])(O,n,a,!1,null,"360f1951",null);e["default"]=X.exports;b()(X,{VBtn:A["a"],VCard:j["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:x["a"],VDataTable:B["a"],VDialog:M["a"],VIcon:F["a"],VSpacer:P["a"],VTextField:D["a"],VTooltip:J})},"8ac9":function(t,e,i){},"93bb":function(t,e,i){"use strict";var n=i("8ac9"),a=i.n(n);a.a},9734:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0efaae1e.61ed5e60.js.map