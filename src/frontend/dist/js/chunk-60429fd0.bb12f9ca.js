(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60429fd0"],{"43cc":function(e,t,r){"use strict";var o=r("94df"),n=r.n(o);n.a},"4bd4":function(e,t,r){"use strict";r("4de4"),r("7db0"),r("4160"),r("caad"),r("07ac"),r("2532"),r("159b");var o=r("5530"),n=r("58df"),a=r("7e2b"),i=r("3206");t["a"]=Object(n["a"])(a["a"],Object(i["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,r=function(e){return e.$watch("hasError",(function(r){t.$set(t.errorBag,e._uid,r)}),{immediate:!0})},o={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?o.shouldValidate=e.$watch("shouldValidate",(function(n){n&&(t.errorBag.hasOwnProperty(e._uid)||(o.valid=r(e)))})):o.valid=r(e),o},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var r=this.watchers.find((function(e){return e._uid===t._uid}));r&&(r.valid(),r.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(o["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"94df":function(e,t,r){},c88c:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loading?r("LoaderComponent"):e.loading?e._e():r("v-card",[r("v-card-title",{class:e.categoryColor},[r("span",{class:e.window.isMobile?"truncate":""},[e._v(e._s(e.categoryTitle)+" - "+e._s(e.categoryText))]),r("v-spacer"),r("v-btn",{attrs:{icon:"",to:"/History"}},[r("v-icon",[e._v(" mdi-close-circle ")])],1)],1),r("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",[r("v-select",{attrs:{label:"Категория",items:e.categoriesAll,"item-text":"title","item-value":"id","prepend-icon":"mdi-format-list-bulleted",required:""},model:{value:e.categoryTypeSelect,callback:function(t){e.categoryTypeSelect=t},expression:"categoryTypeSelect"}}),r("v-select",{attrs:{label:"Тип операции",items:e.categoryItems,rules:e.categoryTypeRules,"item-text":"text","item-value":"type","item-color":"color","prepend-icon":"mdi-format-list-bulleted",required:""},model:{value:e.categorySelect,callback:function(t){e.categorySelect=t},expression:"categorySelect"}}),r("v-dialog",{ref:"dialog",attrs:{"return-value":e.date,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("v-text-field",e._g({attrs:{label:"Дата","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},o))]}}]),model:{value:e.dateModal,callback:function(t){e.dateModal=t},expression:"dateModal"}},[r("v-date-picker",{attrs:{scrollable:"",locale:e.locale,"first-day-of-week":"1"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateModal=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.date)}}},[e._v(" OK ")])],1)],1),r("v-text-field",{attrs:{label:"Счет",rules:e.countRules,required:"","prepend-icon":"mdi-credit-card-multiple"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}}),r("v-text-field",{attrs:{label:"Описание","prepend-icon":"mdi-lead-pencil"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),r("v-card-actions",{staticClass:"v-card-actions"},[e.window.isMobile?r("v-btn",{attrs:{icon:"",large:""},on:{click:e.onRemove}},[r("v-icon",[e._v("mdi-table-row-remove")])],1):e.window.isMobile?e._e():r("v-btn",{attrs:{text:""},on:{click:e.onRemove}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-table-row-remove")]),e._v(" удалить ")],1),e.window.isMobile?r("v-btn",{attrs:{icon:"",large:"",to:"/History"}},[r("v-icon",[e._v("mdi-chart-line")])],1):e.window.isMobile?e._e():r("v-btn",{attrs:{text:"",to:"/History"}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-chart-line")]),e._v(" История ")],1),e.window.isMobile?r("v-btn",{attrs:{icon:"",large:"",disabled:!e.valid},on:{click:e.onSave}},[r("v-icon",[e._v("mdi-content-save")])],1):e.window.isMobile?e._e():r("v-btn",{attrs:{text:"",disabled:!e.valid},on:{click:e.onSave}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" сохранить ")],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogToRemove,callback:function(t){e.dialogToRemove=t},expression:"dialogToRemove"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" Удалить запись? ")]),r("v-card-text",[e._v(" Внимание. Удаление записи необратимо. Подтвердите удаление записи. ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogToRemove=!1}}},[e._v(" Отмена ")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogToRemove=!1,e.removeRecord()}}},[e._v(" Удалить ")])],1)],1)],1)],1)},n=[],a=(r("a4d3"),r("e01a"),r("7db0"),r("5530")),i=(r("96cf"),r("1da1")),c=r("2b0e"),d=r("2f62"),l=r("87c7"),s=c["a"].extend({name:"DetailPage",metaInfo:{title:"Редактирование записи"},components:{LoaderComponent:l["a"]},data:function(){return{loading:!0,valid:!1,id:"",locale:"ru-RU",categorySelect:{type:"outcome"},categoryItems:[{type:"outcome",text:"Расход",color:"deep-orange lighten-4"},{type:"income",text:"Доход",color:"teal lighten-4"}],categoryTypeRules:[function(e){return!!e||"Это поле нужно заполнить"}],categoryTitle:"",categoryId:"",categoryType:"",categoryTypeSelect:{}||"",categoryColor:"",categoryText:"",date:"",dateModal:!1,dateRules:[function(e){return!!e||"Это поле нужно заполнить"}],count:null,countRules:[function(e){return!!e||"Это поле нужно заполнить"},function(e){return/^\d+(?:[\.,]\d+)?$/.test(e)||"Это поле должно содержать только числа"}],description:null,dialogToRemove:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,t.next=3,e.getRecordByIdAction(e.id);case 3:return r=e.categoryItems.find((function(t){return e.record.categoryType===t.type})),e.categorySelect=r,t.next=7,new Date(e.record.date).toISOString().substr(0,10);case 7:e.date=t.sent,e.count=e.record.count,e.description=e.record.description,e.categoryTitle=e.record.categoryTitle,e.categoryId=e.record.categoryId,e.categoryType=r.type,e.categoryColor=r.color,e.categoryText=r.text,e.categoryTypeSelect=e.categoriesAll.find((function(t){return t.id===e.record.categoryId}))||"";case 16:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,!e.$store.getters.uidGetter;case 2:if(!t.sent){t.next=5;break}return t.next=5,e.$store.dispatch("fetchInfoAction");case 5:e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},computed:Object(a["a"])(Object(a["a"])({},Object(d["c"])(["recordByIdGetter","categoriesGetter","windowGetter"])),{},{record:function(){return this.recordByIdGetter},categoriesAll:function(){return this.categoriesGetter},window:function(){return this.windowGetter}}),watch:{categorySelect:function(e){var t=this.categoryItems.find((function(t){return t.type===e}));t&&(this.categoryType=t.type,this.categoryColor=t.color,this.categoryText=t.text)},categoryTypeSelect:function(e){var t=this.categoriesAll,r=t.find((function(t){return t.id===e}));r&&(this.categoryTitle=r.title,this.categoryId=r.id)}},methods:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["getRecordByIdAction","removeRecordAction","updateRecordAction"])),{},{onRemove:function(){this.dialogToRemove=!0},removeRecord:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.removeRecordAction(e.record);case 2:e.$router.push("/History");case 3:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(a["a"])(Object(a["a"])({},e.record),{},{categoryId:e.categoryId,categoryTitle:e.categoryTitle,categoryType:e.categoryType,date:e.date,count:e.count,description:e.description}),t.next=3,e.updateRecordAction(r);case 3:e.$router.push("/History");case 4:case"end":return t.stop()}}),t)})))()}})}),u=s,v=(r("43cc"),r("2877")),f=r("6544"),p=r.n(f),g=r("8336"),m=r("b0af"),h=r("99d9"),y=r("a523"),b=r("2e4b"),w=r("169a9"),x=r("4bd4"),_=r("132d"),T=r("b974"),R=r("2fa4"),k=r("8654"),V=Object(v["a"])(u,o,n,!1,null,"bb1795ba",null);t["default"]=V.exports;p()(V,{VBtn:g["a"],VCard:m["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VContainer:y["a"],VDatePicker:b["a"],VDialog:w["a"],VForm:x["a"],VIcon:_["a"],VSelect:T["a"],VSpacer:R["a"],VTextField:k["a"]})}}]);
//# sourceMappingURL=chunk-60429fd0.bb12f9ca.js.map